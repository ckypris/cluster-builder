---
# This playbook deploys a CoreOS CentOS7 provisioner with PXE/iPXE and Matchbox services

- hosts: all
  remote_user: admin
  become: true
  any_errors_fatal: true
  vars:

  roles:
  - role: common
  - role: centos
  - role: coreos-centos-provisioner

  tasks:
  - name: remove tmp cluster folder if exists
    local_action:
      module: shell
      _raw_params: "rm -rf ../tmp/{{ cluster_pkg_folder }}"
    become: false
    ignore_errors: true
