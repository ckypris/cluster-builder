rm /etc/sysconfig/network-scripts/ifcfg-ens*

cat > /etc/sysconfig/network-scripts/ifcfg-ens32 << EOF
DEVICE="ens32"
ONBOOT="yes"
BOOTPROTO=static
IPADDR={{ hostvars[inventory_hostname]['ansible_host'] }}
NETMASK={{ network_mask }}
GATEWAY={{ network_gateway }}
{% if data_network_dns is defined %}  
DNS1={{ data_network_dns }}
{% endif %}
{% if data_network_dns2 is defined %}  
DNS2={{ data_network_dns2 }}
{% endif %}
{% if data_network_dns3 is defined %}  
DNS3={{ data_network_dns3 }}
{% endif %}
EOF

{% if esxi_data_net is defined %}   

cat > /etc/sysconfig/network-scripts/ifcfg-ens160 << EOF
DEVICE="ens160"
ONBOOT="yes"
BOOTPROTO=static
IPADDR={{ data_ip }}
NETMASK={{ data_network_mask }}
GATEWAY={{ data_network_gateway }}
{% if data_network_dns is defined %}  
DNS1={{ data_network_dns }}
{% endif %}
{% if data_network_dns2 is defined %}  
DNS2={{ data_network_dns2 }}
{% endif %}
{% if data_network_dns3 is defined %}  
DNS3={{ data_network_dns3 }}
{% endif %}
EOF

{% endif %}

cat > /etc/sysconfig/network << EOF
HOSTNAME={{ node_hostname }}.{{ network_dn }}
{% if data_network_dns is defined %}  
DNS1={{ data_network_dns }}
{% endif %}
{% if data_network_dns2 is defined %}  
DNS2={{ data_network_dns2 }}
{% endif %}
{% if data_network_dns3 is defined %}  
DNS3={{ data_network_dns3 }}
{% endif %}
SEARCH={{ network_dn }}
EOF

cat > /etc/resolv.conf << EOF
{% if data_network_dns is defined %}  
nameserver {{ network_dns }}
{% endif %}
{% if data_network_dns2 is defined %}  
nameserver {{ network_dns2 }}
{% endif %}
{% if data_network_dns3 is defined %}  
nameserver {{ network_dns3 }}
{% endif %}
EOF

